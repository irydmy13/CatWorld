<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="CatWorld.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:res="clr-namespace:CatWorld.Resources.Localization"
             Title="{x:Static res:AppResources.Settings}">

    <VerticalStackLayout Padding="16" Spacing="14">

        <!-- ЯЗЫК: флажки EN / ET -->
        <Label Text="{x:Static res:AppResources.Language}" FontAttributes="Bold"/>
        
        <Grid ColumnDefinitions="*,20,*,20,*" Margin="0,4,0,12" VerticalOptions="Start">

            <!-- EN -->
            <Border Grid.Column="0"
          Padding="6"
          StrokeThickness="2"
          StrokeShape="RoundRectangle 12"
          BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2C2C2E}">
                <Border.Triggers>
                    <DataTrigger TargetType="Border" Binding="{Binding SelectedLanguage}" Value="en">
                        <Setter Property="Stroke" Value="#4F46E5"/>
                        <Setter Property="BackgroundColor" Value="#EDEBFE"/>
                    </DataTrigger>
                </Border.Triggers>
                <HorizontalStackLayout Spacing="8">
                    <ImageButton Source="flag_en.png"
                   WidthRequest="40" HeightRequest="28"
                   Padding="0"
                   BackgroundColor="Transparent"
                   Command="{Binding SetLanguageCommand}"
                   CommandParameter="en"
                   SemanticProperties.Hint="Switch to English"/>
                    <Label Text="EN" VerticalTextAlignment="Center"/>
                </HorizontalStackLayout>
            </Border>

            <!-- spacer -->
            <BoxView Grid.Column="1" WidthRequest="20" Opacity="0"/>

            <!-- ET -->
            <Border Grid.Column="2"
          Padding="6"
          StrokeThickness="2"
          StrokeShape="RoundRectangle 12"
          BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2C2C2E}">
                <Border.Triggers>
                    <DataTrigger TargetType="Border" Binding="{Binding SelectedLanguage}" Value="et">
                        <Setter Property="Stroke" Value="#4F46E5"/>
                        <Setter Property="BackgroundColor" Value="#EDEBFE"/>
                    </DataTrigger>
                </Border.Triggers>
                <HorizontalStackLayout Spacing="8">
                    <ImageButton Source="flag_et.png"
                   WidthRequest="40" HeightRequest="28"
                   Padding="0"
                   BackgroundColor="Transparent"
                   Command="{Binding SetLanguageCommand}"
                   CommandParameter="et"
                   SemanticProperties.Hint="Lülitu eesti keelele"/>
                    <Label Text="ET" VerticalTextAlignment="Center"/>
                </HorizontalStackLayout>
            </Border>

            <!-- spacer -->
            <BoxView Grid.Column="3" WidthRequest="20" Opacity="0"/>

            <!-- RU -->
            <Border Grid.Column="4"
          Padding="6"
          StrokeThickness="2"
          StrokeShape="RoundRectangle 12"
          BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2C2C2E}">
                <Border.Triggers>
                    <DataTrigger TargetType="Border" Binding="{Binding SelectedLanguage}" Value="ru">
                        <Setter Property="Stroke" Value="#4F46E5"/>
                        <Setter Property="BackgroundColor" Value="#EDEBFE"/>
                    </DataTrigger>
                </Border.Triggers>
                <HorizontalStackLayout Spacing="8">
                    <ImageButton Source="flag_ru.png"
                   WidthRequest="40" HeightRequest="28"
                   Padding="0"
                   BackgroundColor="Transparent"
                   Command="{Binding SetLanguageCommand}"
                   CommandParameter="ru"
                   SemanticProperties.Hint="Переключить на русский"/>
                    <Label Text="RU" VerticalTextAlignment="Center"/>
                </HorizontalStackLayout>
            </Border>
        </Grid>

        <!-- ТЕМА -->
        <Label Text="{x:Static res:AppResources.Theme}" FontAttributes="Bold"/>
        <HorizontalStackLayout>
            <Button Text="{x:Static res:AppResources.Light}" Command="{Binding SetLightCommand}"/>
            <Button Text="{x:Static res:AppResources.Dark}"  Command="{Binding SetDarkCommand}" Margin="8,0,0,0"/>
        </HorizontalStackLayout>

        <!-- ЗВУК -->
        <Grid ColumnDefinitions="*,Auto" Padding="0,8,0,0">
            <Label Text="{x:Static res:AppResources.Sound}" Grid.Column="0" />
            <Switch IsToggled="{Binding SoundEnabled}" Grid.Column="1" />
        </Grid>

    </VerticalStackLayout>
</ContentPage>
